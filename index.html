<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Client for the Microsofts Cognitive Services Text to Speech REST' API • conrad</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Client for the Microsofts Cognitive Services Text to Speech REST' API">
<meta name="description" content="Convert text into synthesized speech and get a list of supported voices for a region. Microsofts Cognitive Services Text to Speech REST' API &lt;https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech?tabs=streaming&gt; supports neural text to speech voices, which support specific languages and dialects that are identified by locale.">
<meta property="og:description" content="Convert text into synthesized speech and get a list of supported voices for a region. Microsofts Cognitive Services Text to Speech REST' API &lt;https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech?tabs=streaming&gt; supports neural text to speech voices, which support specific languages and dialects that are identified by locale.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">conrad</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/conrad.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/api-key.html">Configuring an API Key</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fhdsl/conrad/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="conrad">conrad<a class="anchor" aria-label="anchor" href="#conrad"></a>
</h1></div>
<!-- badges: start -->

<p><span class="emoji" data-emoji="exclamation">❗</span><em>conrad is a reboot of <a href="https://github.com/jhudsl/mscstts" class="external-link">mscstts</a>. Instead of <a href="https://httr.r-lib.org/#status" class="external-link">httr</a>, which is superseded and not recommended, we use <a href="https://httr2.r-lib.org/" class="external-link">httr2</a> to perform HTTP requests to the Microsoft Cognitive Services Text to Speech REST API.</em></p>
<p>conrad serves as a client to the <a href="https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech?tabs=streaming" class="external-link">Microsoft Cognitive Services Text to Speech REST API</a>. The Text to Speech REST API supports neural text to speech voices, which support specific languages and dialects that are identified by locale. Each available endpoint is associated with a region.</p>
<p>Before you use the text to speech REST API, a valid account must be registered at the <a href="https://azure.microsoft.com/en-us/free/ai-services/" class="external-link">Microsoft Azure Cognitive Services</a> and you must obtain an API key. Without an API key, this package will not work.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the CRAN version:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"conrad"</span><span class="op">)</span></span></code></pre></div>
<p>Or install the development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"fhdsl/conrad"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-an-api-key">Getting an API key<a class="anchor" aria-label="anchor" href="#getting-an-api-key"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Sign in/Create an Azure account on <a href="https://azure.microsoft.com/en-us/free/cognitive-services/" class="external-link">Microsoft Azure Cognitive Services</a>.</li>
<li>Click <code>+ Create a resource</code> (below “Azure services” or click on the Hamburger button)</li>
<li>Search for “Speech” and Click <code>Create</code> -&gt; <code>Speech</code>
</li>
<li>Create a <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-portal#what-is-a-resource-group" class="external-link">Resource group</a> and a “Name”.</li>
<li>Choose <code>Pricing tier</code> (you can choose the free version with <code>Free F0</code>)</li>
<li>Click <code>Review + create</code>, review the Terms, and click <code>Create</code>.</li>
</ol>
<p>If the deployment was successful, you should see <span class="emoji" data-emoji="white_check_mark">✅</span> <strong>Your deployment is complete</strong> on the next page.</p>
<ol start="7" style="list-style-type: decimal">
<li>Under <code>Next steps</code>, click <code>Go to resource</code>
</li>
<li>Look on the left sidebar and under <code>Resource Management</code>, click <code>Keys and Endpoint</code>
</li>
<li>Copy either <code>KEY 1</code> or <code>KEY 2</code> to clipboard. Only one key is necessary to make an API call.</li>
</ol>
<p>Once you complete these steps, you have successfully retrieved your API keys to access the API.</p>
<p><span class="emoji" data-emoji="warning">⚠️</span> Remember your <code>Location/Region</code>, which you use to make calls to the API. Specifying a different region will lead to a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403" class="external-link">HTTP 403 Forbidden response</a>.</p>
<p>For more detailed information on each step, refer to the <a href="http://hutchdatascience.org/conrad/articles/api-key.html">API Key vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="setting-your-api-key">Setting your API key<a class="anchor" aria-label="anchor" href="#setting-your-api-key"></a>
</h2>
<p>You can set your API key in a number of ways:</p>
<ol style="list-style-type: decimal">
<li>Edit <code>~/.Renviron</code> and set <code>MS_TTS_API_KEY = "YOUR_API_KEY"</code>
</li>
<li>In <code>R</code>, use <code>options(ms_tts_key = "YOUR_API_KEY")</code>.</li>
<li>Set <code>export MS_TTS_API_KEY=YOUR_API_KEY</code> in <code>.bash_profile</code>/<code>.bashrc</code> if you’re using <code>R</code> in the terminal.</li>
<li>Pass <code>api_key = "YOUR_API_KEY"</code> in arguments of functions such as <code>ms_list_voices(api_key = "YOUR_API_KEY")</code>.</li>
</ol>
</div>
<div class="section level2">
<h2 id="get-a-list-of-voices">Get a list of voices<a class="anchor" aria-label="anchor" href="#get-a-list-of-voices"></a>
</h2>
<p><code><a href="reference/ms_list_voice.html">ms_list_voice()</a></code> uses the <code>tts.speech.microsoft.com/cognitiveservices/voices/list</code> endpoint to get a full <a href="https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech?tabs=streaming#get-a-list-of-voices" class="external-link">list of voices</a> for a specific region. It attaches a region prefix to this endpoint to get a list of voices for that region.</p>
<p>For example, to get a list of all the voices for the <code>westus</code> region, it uses the <code>https://westus.tts.speech.microsoft.com/cognitiveservices/voices/list</code> endpoint.</p>
<p><span class="emoji" data-emoji="warning">⚠️</span> Be sure to specify the Speech resource region that corresponds to your API Key.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ms_list_voice.html">ms_list_voice</a></span><span class="op">(</span>api_key <span class="op">=</span> <span class="st">"YOUR_API_KEY"</span>, region <span class="op">=</span> <span class="st">"westus"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="convert-text-to-speech">Convert text to speech<a class="anchor" aria-label="anchor" href="#convert-text-to-speech"></a>
</h2>
<p><code><a href="reference/ms_synthesize.html">ms_synthesize()</a></code> uses the <code>tts.speech.microsoft.com/cognitiveservices/v1</code> endpoint to convert <a href="https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech?tabs=streaming#convert-text-to-speech" class="external-link">text to speech</a>. The endpoint requires <a href="https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/speech-synthesis-markup" class="external-link">Speech Synthesis Markup Language (SSML)</a> to specify the language, gender, and full voice name.</p>
<p><span class="emoji" data-emoji="warning">⚠️</span> Be sure to specify the Speech resource region that corresponds to your API Key.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert text to speech</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ms_synthesize.html">ms_synthesize</a></span><span class="op">(</span>script <span class="op">=</span> <span class="st">"Hello world, this is a talking computer"</span>, region <span class="op">=</span> <span class="st">"westus"</span>, gender <span class="op">=</span> <span class="st">"Male"</span><span class="op">)</span></span>
<span><span class="co"># Returns hexadecimal representation of binary data</span></span>
<span></span>
<span><span class="co"># Create file to store audio output</span></span>
<span><span class="va">output_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".wav"</span><span class="op">)</span></span>
<span><span class="co"># Write binary data to output path</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">writeBin</a></span><span class="op">(</span><span class="va">res</span>, con <span class="op">=</span> <span class="va">output_path</span><span class="op">)</span></span>
<span><span class="co"># Play audio in browser</span></span>
<span><span class="fu"><a href="reference/play_audio.html">play_audio</a></span><span class="op">(</span>audio <span class="op">=</span> <span class="va">output_path</span><span class="op">)</span></span></code></pre></div>
<p>If you want more examples of different voices with different scripts, refer to the Introduction to conrad <a href="http://hutchdatascience.org/conrad/articles/conrad.html">vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="get-an-access-token">Get an access token<a class="anchor" aria-label="anchor" href="#get-an-access-token"></a>
</h2>
<p><code><a href="reference/ms_get_token.html">ms_get_token()</a></code> makes a request to the <code>issueToken</code> endpoint to get an <a href="https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech?tabs=streaming#how-to-get-an-access-token" class="external-link">access token</a>. The function require an API key and region as inputs. The access token is used to send requests to the API.</p>
<p><span class="emoji" data-emoji="warning">⚠️</span> Be sure to specify the Speech resource region that corresponds to your API Key.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ms_get_token.html">ms_get_token</a></span><span class="op">(</span>api_key <span class="op">=</span> <span class="st">"YOUR_API_KEY"</span>, region <span class="op">=</span> <span class="st">"westus"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="major-differences-to-mscstts">Major differences to mscstts<a class="anchor" aria-label="anchor" href="#major-differences-to-mscstts"></a>
</h2>
<ul>
<li>To enhance the reliability of our package, we have transitioned from using <a href="https://httr.r-lib.org/" class="external-link">httr</a> to <a href="https://httr2.r-lib.org/" class="external-link">httr2</a> for handling HTTP requests to the <a href="https://learn.microsoft.com/en-us/azure/cognitive-services/Speech-Service/rest-text-to-speech?tabs=streaming" class="external-link">Text to Speech REST API</a>. This change was motivated by the fact that httr is <a href="https://httr.r-lib.org/#status" class="external-link">no longer</a> being actively maintained, with updates limited to those necessary for CRAN compatibility. In contrast, httr2 represents a modern reimagining of httr and is strongly recommended for usage.</li>
<li>It resolves the HTTP 403 Forbidden <a href="https://github.com/jhudsl/mscstts/issues/13" class="external-link">issue</a>. An HTTP 403 Forbidden response status code signifies that the server comprehends the request but denies authorization. In the case of <a href="https://github.com/jhudsl/mscstts/blob/master/R/ms_synthesize.R" class="external-link"><code>mscstts::ms_synthesize()</code></a>, the <a href="https://github.com/jhudsl/mscstts/issues/13" class="external-link">problem</a> arose due to the use of an invalid voice within the HTTP request, specifically concerning the chosen region. For instance, the SSML might have contained a voice name that was not supported in the <code>westus</code> region. As a consequence, the server would reject the HTTP request.</li>
<li>We have made significant improvements to the documentation across the entire package. These enhancements include simpler function names, commented functions for clarity, removal of unnecessary functions and arguments, and URLs directing users to pages that explain text-to-speech jargon.</li>
</ul>
<p>We believe that these improvements will greatly enhance the usability of the package and make it even more reliable in the long-term.</p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>conrad wouldn’t be possible without prior work on <a href="https://github.com/jhudsl/mscstts" class="external-link">mscstts</a> by <a href="https://github.com/muschellij2" class="external-link">John Muschelli</a> and <a href="https://github.com/r-lib/httr2" class="external-link">httr2</a> by <a href="https://github.com/hadley" class="external-link">Hadley Wickham</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=conrad" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/fhdsl/conrad/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/fhdsl/conrad/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing conrad</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Howard Baek <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0009-0000-8942-1618" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>John Muschelli <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-6469-1750" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/fhdsl/conrad/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/fhdsl/conrad/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=conrad" class="external-link"><img src="https://www.r-pkg.org/badges/version/conrad" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Howard Baek, John Muschelli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
